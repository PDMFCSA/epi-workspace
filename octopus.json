{
    "workDir": ".",
    "dependencies": [
      {
        "name": "webcardinal/bundle",
        "src": "https://github.com/webcardinal/webcardinal-all-release",
        "actions": [
          {
            "type": "smartClone",
            "target": ".",
            "collectLog": false
          },
          {
            "type": "execute",
            "cmd": "cd webcardinal && npm install"
          }
        ]
      },
      {
        "name": "opendsu-sdk",
        "src": "http://github.com/opendsu/opendsu-sdk.git",
        "actions": [
          {
            "type": "smartClone",
            "target": ".",
            "collectLog": false
          },
          {
            "type": "execute",
            "cmd": "cd opendsu-sdk && npm install"
          }
        ]
      },
      {
        "name": "demiurge",
        "src": "https://github.com/OpenDSU/demiurge.git",
        "actions": [
          {
            "type": "smartClone",
            "target": ".",
            "collectLog": false
          },
          {
            "type": "execute",
            "cmd": "cd demiurge && npm install"
          }
        ]
      },
      {
        "name": "apihub-root/demiurge-wallet/loader",
        "src": "http://github.com/opendsu/trust-loader.git",
        "actions": [
          {
            "type": "smartClone",
            "target": ".",
            "collectLog": false
          },
          {
            "type": "execute",
            "cmd": "cd apihub-root/demiurge-wallet/loader && npm install"
          },
          {
            "type": "copy",
            "src": "apihub-root/demiurge-wallet/loader/loader-config.local.json-template",
            "target": "apihub-root/demiurge-wallet/loader/loader-config.local.json",
            "options": {
              "overwrite": true
            }
          }
        ]
      },
      {
        "name": "apihub-root/dsu-fabric-wallet/loader",
        "src": "http://github.com/opendsu/trust-loader.git",
        "actions": [
          {
            "type": "smartClone",
            "target": ".",
            "collectLog": false
          },
          {
            "type": "execute",
            "cmd": "cd apihub-root/dsu-fabric-wallet/loader && npm install"
          }
        ]
      },
      {
        "name": "themes/citrus-theme",
        "src": "http://github.com/opendsu/citrus-theme.git",
        "actions": [
          {
            "type": "smartClone",
            "target": ".",
            "collectLog": false
          },
          {
            "type": "execute",
            "cmd": "cd themes/citrus-theme && npm install"
          }
        ]
      },
      {
        "name": "themes/clear-sky-theme",
        "src": "http://github.com/opendsu/clear-sky-theme.git",
        "actions": [
          {
            "type": "smartClone",
            "target": ".",
            "collectLog": false
          },
          {
            "type": "execute",
            "cmd": "cd themes/clear-sky-theme && npm install"
          }
        ]
      },
      {
        "name": "themes/epi-theme",
        "src": "https://github.com/${GITHUB_ORGANIZATION}/epi-theme.git",
        "actions": [
          {
            "type": "smartClone",
            "target": ".",
            "collectLog": false
          },
          {
            "type": "execute",
            "cmd": "cd themes/epi-theme && npm install"
          }
        ]
      },
      {
        "name": "gtin-resolver",
        "src": "https://github.com/${GITHUB_ORGANIZATION}/gtin-resolver.git",
        "actions": [
          {
            "type": "smartClone",
            "target": ".",
            "collectLog": false
          },
          {
            "type": "execute",
            "cmd": "cd gtin-resolver && npm install"
          },
          {
            "type": "execute",
            "cmd": "cd gtin-resolver && npm run build"
          }
        ]
      },
      {
        "name": "themes/blue-fluorite-theme",
        "src": "https://github.com/opendsu/blue-fluorite-theme.git",
        "actions": [
          {
            "type": "smartClone",
            "target": ".",
            "collectLog": false
          },
          {
            "type": "execute",
            "cmd": "cd themes/blue-fluorite-theme && npm install"
          }
        ]
      },
      {
        "name": "ethadapter",
        "src": "https://github.com/opendsu/eth-adapter",
        "actions": [
          {
            "type": "smartClone",
            "target": ".",
            "collectLog": false
          },
          {
            "type": "execute",
            "cmd": "echo \"manualy run cd ethadapter && npm install\""
          },
          {
            "type": "execute",
            "cmd": "echo \"manualy run cd ethadapter/EthAdapter && npm install\""
          },
          {
            "type": "execute",
            "cmd": "echo \"manualy run cd ethadapter/SmartContracts && npm install\""
          }
        ]
      },
      {
        "name": "dsu-fabric-ssapp",
        "src": "https://github.com/${GITHUB_ORGANIZATION}/dsu-fabric-ssapp.git",
        "actions": [
          {
            "type": "smartClone",
            "target": ".",
            "collectLog": false
          },
          {
            "type": "execute",
            "cmd": "cd dsu-fabric-ssapp && npm install"
          }
        ]
      },
      {
        "name": "zxing-wrapper",
        "src": "http://github.com/webcardinal/zxing-wrapper.git",
        "actions": [
          {
            "type": "smartClone",
            "target": "./apihub-root/lightweight-pwa/lib",
            "collectLog": false,
            "commit": "0f5190869e0a6f7ec534384de4e2cb487b42d62e",
            "tag": "v1.1.0"
          }
        ]
      }
    ],
    "patch": [
      {
        "name": "trust-loader-config",
        "actions": [
          {
            "type": "copy",
            "src": "./trust-loader-config",
            "target": "./apihub-root",
            "options": {
              "overwrite": true,
              "ignoreErrors": true
            }
          }
        ]
      }
    ],
    "postinstall": [
      {
        "name": "trust-loader-config",
        "actions": [
          {
            "type": "execute",
            "cmd": "node ./node_modules/octopus/scripts/setEnv --file=../../../env.json \"node ./bin/octopusRun.js patch\""
          }
        ]
      },
      {
        "name": "copy-bundles",
        "actions": [
          {
            "type": "execute",
            "cmd": "cd apihub-root/leaflet-wallet/loader && npm install"
          },
          {
            "type": "execute",
            "cmd": "cd apihub-root/dsu-fabric-wallet/loader && npm install"
          },
          {
            "type": "execute",
            "cmd": "cd apihub-root/demiurge-wallet/loader && npm install"
          },
          {
            "type": "copy",
            "src": "./opendsu-sdk/psknode/bundles/webshims.js",
            "target": "./apihub-root/bundles/webshims.js",
            "options": {
              "overwrite": true
            }
          },
          {
            "type": "copy",
            "src": "./opendsu-sdk/psknode/bundles/loaderBoot.js",
            "target": "./apihub-root/bundles/loaderBoot.js",
            "options": {
              "overwrite": true
            }
          }
        ]
      },
      {
        "name": "gtin-resolver-build",
        "src": "",
        "actions": [
          {
            "type": "execute",
            "cmd": "cd gtin-resolver && npm run build"
          }
        ]
      }
    ],
    "epi-ssapps-and-wallets-build": [
      {
        "name": "webcardinal-wallet-build",
        "actions": [
          {
            "type": "execute",
            "cmd": "cd webcardinal && npm run build"
          }
        ]
      },
      {
        "name": "citrus-theme-wallet-build",
        "src": "",
        "actions": [
          {
            "type": "execute",
            "cmd": "cd themes/citrus-theme && npm run build-dossier"
          }
        ]
      },
      {
        "name": "clear-sky-theme-wallet-build",
        "src": "",
        "actions": [
          {
            "type": "execute",
            "cmd": "cd themes/clear-sky-theme && npm run build-dossier"
          }
        ]
      },
      {
        "name": "epi-theme-wallet-build",
        "src": "",
        "actions": [
          {
            "type": "execute",
            "cmd": "cd themes/epi-theme && npm run build-dossier"
          }
        ]
      },
      {
        "name": "demiurge-wallet_bind_to_demiurge",
        "src": "",
        "actions": [
          {
            "type": "execute",
            "cmd": "cd demiurge && npm run build"
          },
          {
            "type": "copySeed",
            "src": "./demiurge/seed",
            "target": "./apihub-root/external-volume/wallets/demiurge-wallet/apps-patch/demiurge/seed",
            "options": {
              "overwrite": true
            }
          },
          {
            "type": "copySeed",
            "src": "./demiurge/seed",
            "target": "./apihub-root/external-volume/wallets/demiurge-wallet/wallet-patch/seed",
            "options": {
              "overwrite": true
            }
          },
          {
            "type": "execute",
            "cmd": "echo Use this folder template in order to customize the application instance by adding configuration, pages etc. > ./apihub-root/external-volume/wallets/demiurge-wallet/apps-patch/demiurge/readme"
          }
        ]
      },
      {
        "name": "dsu-fabric-wallet_bind_to_dsu-fabric-ssapp",
        "src": "",
        "actions": [
          {
            "type": "execute",
            "cmd": "cd dsu-fabric-ssapp && npm run build"
          },
          {
            "type": "copySeed",
            "src": "./dsu-fabric-ssapp/seed",
            "target": "./apihub-root/external-volume/wallets/dsu-fabric-wallet/apps-patch/dsu-fabric-ssapp/seed",
            "options": {
              "overwrite": true
            }
          },
          {
            "type": "copySeed",
            "src": "./dsu-fabric-ssapp/seed",
            "target": "./apihub-root/external-volume/wallets/dsu-fabric-wallet/wallet-patch/seed",
            "options": {
              "overwrite": true
            }
          },
          {
            "type": "execute",
            "cmd": "echo Use this folder template in order to customize the application instance by adding configuration, pages etc. > ./apihub-root/external-volume/wallets/dsu-fabric-wallet/apps-patch/dsu-fabric-ssapp/readme"
          }
        ]
      }
    ],
    "ssapps-and-wallets-build": [
      {
        "name": "gtin-resolver-build",
        "src": "",
        "actions": [
          {
            "type": "execute",
            "cmd": "cd gtin-resolver && npm run build"
          }
        ]
      },
      {
        "name": "epi-ssapps-and-wallets-build",
        "actions": [
          {
            "type": "execute",
            "cmd": "node ./node_modules/octopus/scripts/setEnv --file=../../../env.json \"node ./bin/octopusRun.js epi-ssapps-and-wallets-build\""
          }
        ]
      }
    ],
    "build": [
      {
        "name": "build-all",
        "actions": [
          {
            "type": "execute",
            "cmd": "node ./node_modules/octopus/scripts/setEnv --file=../../../env.json \"node ./bin/octopusRun.js ssapps-and-wallets-build\""
          },
          {
            "type": "execute",
            "cmd": "node ./node_modules/octopus/scripts/setEnv --file=../../../env.json \"node ./bin/octopusRun.js postbuild\""
          }
        ]
      }
    ],
    "postbuild": [
      {
        "name": "patching trust loaders configs",
        "actions": [
          {
            "type": "execute",
            "cmd": "node ./node_modules/octopus/scripts/setEnv --file=../../../env.json \"node ./bin/octopusRun.js postinstall\""
          }
        ]
      }
    ]

  }
